
upstream frontend_web {
  server 172.31.21.242:81;
  server 172.31.27.24:81;
  server 172.31.17.1:81;
 }

 upstream frontend_backofficeweb {
   server 172.31.21.242:84;
   server 172.31.27.24:84;
   server 172.31.17.1:84;
 }

 upstream microservices_authenticationservice {
     server 172.31.21.242:8040;
     server 172.31.27.24:8040;
     server 172.31.17.1:8040;
 }

 upstream microservices_socketservice {
      server 172.31.21.242:8039;
      server 172.31.27.24:8039;
      server 172.31.17.1:8039;
 }

 upstream microservices_messageservice {
     server 172.31.21.242:8037;
     server 172.31.27.24:8037;
     server 172.31.17.1:8037;
 }

 upstream microservices_historyservice {
     server 172.31.21.242:8051;
     server 172.31.27.24:8051;
     server 172.31.17.1:8051;
 }

 upstream microservices_transactionservice {
      server 172.31.21.242:8020;
      server 172.31.27.24:8020;
      server 172.31.17.1:8020;
  }

  upstream microservices_backofficeservice {
      server 172.31.21.242:8050;
      server 172.31.27.24:8050;
      server 172.31.17.1:8050;
  }

  upstream microservices_userandaccountservice {
      server 172.31.21.242:8039;
      server 172.31.27.24:8039;
      server 172.31.17.1:8039;
  }

  upstream microservices_usermongo {
      server 172.31.21.242:27016;
      server 172.31.27.24:27016;
      server 172.31.17.1:27016;
  }

  upstream microservices_transactionmongo {
      server 172.31.21.242:27013;
      server 172.31.27.24:27013;
      server 172.31.17.1:27013;
  }

  upstream microservices_backofficemongo {
      server 172.31.21.242:27018;
      server 172.31.27.24:27018;
      server 172.31.17.1:27018;
  }

  upstream microservices_messagemongo {
      server 172.31.21.242:27015;
      server 172.31.27.24:27015;
      server 172.31.17.1:27015;
  }

  upstream microservices_historymongo {
      server 172.31.21.242:27014;
      server 172.31.27.24:27014;
      server 172.31.17.1:27014;
  }

  upstream blockchain_ethereum {
    server 35.197.235.172:8545;
    server 35.197.235.172:30303;
   }
server {

  listen 443 ssl;

  server_name lb.monifair.com;
  ssl on;
  ssl_certificate      /certs/chain.crt;
  ssl_certificate_key  /certs/chain.key;
  ssl_protocols TLSv1.2 TLSv1.1 TLSv1;

  add_header Strict-Transport-Security max-age=500;

  location / {
    #auth_basic "Restricted Content";
    #auth_basic_user_file /etc/nginx/.htpasswd;
    proxy_pass https://Frontendsvc_web/;
  }

  location /backofficeweb {
    #auth_basic "Restricted Content";
    #auth_basic_user_file /etc/nginx/.htpasswd;
    proxy_pass https://Frontendsvc_backofficeweb/;
  }



  location /backoffice {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/loggedin {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/searchforuserbyphonenr {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/listallusers {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/activateuser {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/deactivateuser {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/createemployee {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/deleteall {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/deleteemployee {
    proxy_pass https://microservices_backofficeservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backoffice/authenticatebyphonenr {
    proxy_pass https://microservices_authenticationservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/deleteall {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/activateuserwithtoken {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/deactivateuserwithtoken {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/deleteuserwithtoken {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/usertokenbyphonenr {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/getuser {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/listallusers {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/deleteuser {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /createuser {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }
  location /getuser {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getuserbytoken {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /updatephone {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /updatepassword {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /confirmsignupcode {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

    location /confirmloginmobile {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

    location /confirmlogincode {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /resendcode {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }


  location /deleteall {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /deleteuser  {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

    location /forgotpassword  {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

    location /resetpassword  {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /authenticate {
    proxy_pass https://microservices_authenticationservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /authenticated {
    proxy_set_header Host $host;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /login {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /loggedin {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /register {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /sendmessage {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getmessages {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getmessage {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /deletemessage {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

    location /sendemail {
    proxy_pass https://microservices_messageservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getsocket {
    proxy_pass https://microservices_socketservice/socket.io/socket.io.js;
    proxy_set_header Upgrade $http_upgrade;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /socket.io {
    proxy_pass https://microservices_socketservice/socket.io/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /savehistory {
    proxy_pass https://microservices_historyservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getallhistory {
    proxy_pass https://microservices_historyservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getallhistoryforobject {
    proxy_pass https://microservices_historyservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /createaccount {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /addcontractaddress {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getallaccounts {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /getallaccountsforuserbyid {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }
  location /getallaccountsforuserbytoken {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/deleteallforuser {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }

  location /backofficeroutes/removeallaccounts {
    proxy_pass https://microservices_userandaccountservice;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
  }


  location /info {
    proxy_pass https://microservices_transactionservice/info;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
   }

  location /savetransactionalaccountinfo{
    proxy_pass https://microservices_transactionservice/savetransactionalaccountinfo;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
    proxy_read_timeout 2500;
  }
 location /getuseramount {
    proxy_pass https://microservices_transactionservice/getuseramount;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
    proxy_read_timeout 2500;
   }
  location /getcoinbaseaccount {
    proxy_pass https://microservices_transactionservice/getcoinbaseaccount;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_cache_bypass $http_upgrade;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_ssl_certificate     /certs/chain.crt;
    proxy_ssl_certificate_key /certs/chain.key;
    proxy_read_timeout 2500;
   }

   location /createethereumaccount {
     proxy_pass https://microservices_transactionservice/createethereumaccount;
     proxy_http_version 1.1;
     proxy_set_header Upgrade $http_upgrade;
     proxy_set_header Connection 'upgrade';
     proxy_cache_bypass $http_upgrade;
     proxy_set_header Host $host;
     proxy_set_header X-Real-IP $remote_addr;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_set_header X-Forwarded-Proto https;
     proxy_ssl_certificate     /certs/chain.crt;
     proxy_ssl_certificate_key /certs/chain.key;
     proxy_read_timeout 2500;
    }

    #location /ethereum {
    #  proxy_pass https://blockchain_ethereum/ethereum;
    #  proxy_http_version 1.1;
    #  proxy_set_header Upgrade $http_upgrade;
    #  proxy_set_header Connection 'upgrade';
    #  proxy_cache_bypass $http_upgrade;
    #  proxy_set_header Host $host;
    #  proxy_set_header X-Real-IP $remote_addr;
    #  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #  proxy_set_header X-Forwarded-Proto https;
    #  proxy_ssl_certificate     /certs/chain.crt;
    #  proxy_ssl_certificate_key /certs/chain.key;
    #  proxy_read_timeout 2500;
     #}

    location /checkallbalances{
      proxy_pass https://microservices_transactionservice/checkallbalances;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_cache_bypass $http_upgrade;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto https;
      proxy_ssl_certificate     /certs/chain.crt;
      proxy_ssl_certificate_key /certs/chain.key;
      proxy_read_timeout 2500;
     }

    location /getlistofaccounts{
      proxy_pass https://microservices_transactionservice/getlistofaccounts;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_cache_bypass $http_upgrade;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto https;
      proxy_ssl_certificate     /certs/chain.crt;
      proxy_ssl_certificate_key /certs/chain.key;
      proxy_read_timeout 2500;
     }

    location /getaccountgasbalance{
      proxy_pass https://microservices_transactionservice/getaccountgasbalance;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_cache_bypass $http_upgrade;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto https;
      proxy_ssl_certificate     /certs/chain.crt;
      proxy_ssl_certificate_key /certs/chain.key;
      proxy_read_timeout 2500;
     }

    location /transfergasbalance{
         proxy_pass https://microservices_transactionservice/transfergasbalance;
         proxy_http_version 1.1;
         proxy_set_header Upgrade $http_upgrade;
         proxy_set_header Connection 'upgrade';
         proxy_cache_bypass $http_upgrade;
         proxy_set_header Host $host;
         proxy_set_header X-Real-IP $remote_addr;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header X-Forwarded-Proto https;
         proxy_ssl_certificate     /certs/chain.crt;
         proxy_ssl_certificate_key /certs/chain.key;
         proxy_read_timeout 2500;
    }

    location /getaccountcontract{
       proxy_pass https://microservices_transactionservice/getaccountcontract;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
       proxy_read_timeout 2500;
      }

      location /bankcapitalcontract{
        proxy_pass https://microservices_transactionservice/getbankcapitalcontract;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_cache_bypass $http_upgrade;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;
        proxy_ssl_certificate     /certs/chain.crt;
        proxy_ssl_certificate_key /certs/chain.key;
        proxy_read_timeout 2500;
       }


     location /netstats{
         proxy_pass http://microservices_transactionservice/netstats;
         proxy_http_version 1.1;
         proxy_set_header Upgrade $http_upgrade;
         proxy_set_header Connection 'upgrade';
         proxy_cache_bypass $http_upgrade;
         proxy_set_header Host $host;
         proxy_set_header X-Real-IP $remote_addr;
         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header X-Forwarded-Proto https;
         proxy_ssl_certificate     /certs/chain.crt;
         proxy_ssl_certificate_key /certs/chain.key;
         proxy_read_timeout 1000;
     }

     location /user {
       proxy_pass https://microservices_usermongo;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
     }

     location /backofficeuser {
       proxy_pass https://microservices_backofficemongo;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
     }

     location /historytable {
       proxy_pass https://microservices_historymongo;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
     }

     location /transaction {
       proxy_pass https://microservices_transactionmongo;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
     }

     location /message {
       proxy_pass https://microservices_messagemongo;
       proxy_http_version 1.1;
       proxy_set_header Upgrade $http_upgrade;
       proxy_set_header Connection 'upgrade';
       proxy_cache_bypass $http_upgrade;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto https;
       proxy_ssl_certificate     /certs/chain.crt;
       proxy_ssl_certificate_key /certs/chain.key;
     }
}
